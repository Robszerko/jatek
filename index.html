<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Napi Szó 2.0 - Szókereső Játék</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;700&display=swap" rel="stylesheet">
    
    <style>
        /* --- CSS STÍLUSOK --- */
        :root {
            --bg-color: #121213;
            --text-color: #FFFFFF;
            --border-color: #3a3a3c;
            --absent-color: #3a3a3c;
            --present-color: #b59f3b;
            --correct-color: #538d4e;
            --key-bg: #818384;
            --key-text-color: #FFFFFF;
        }

        html {
            height: -webkit-fill-available; /* iOS Safari magasság fix */
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            font-family: 'Roboto Mono', monospace;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            /* iOS Safari magasság fix */
            min-height: -webkit-fill-available;
            margin: 0;
            -webkit-user-select: none;
            -ms-user-select: none;
            user-select: none;
            touch-action: manipulation; /* Dupla koppintás zoom kikapcsolása mobilon */
        }

        #game-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: space-between;
            height: 100%;
            width: 100%;
            max-width: 500px;
            padding: 5px;
            box-sizing: border-box;
        }

        header {
            text-align: center;
            border-bottom: 1px solid var(--border-color);
            padding-bottom: 10px;
            width: 100%;
        }

        header h1 { margin: 0; font-size: clamp(1.8rem, 5vw, 2.2rem); letter-spacing: 0.1em; }
        header p { margin-top: 5px; color: #a0a0a0; }

        #grid-container {
            display: grid;
            grid-template-rows: repeat(10, 1fr);
            grid-gap: 5px;
            padding: 10px;
            box-sizing: border-box;
            width: 330px;
            height: 400px;
            flex-shrink: 0;
        }

        .grid-row { display: grid; grid-template-columns: repeat(6, 1fr); grid-gap: 5px; }

        /* Új animációhoz szükséges stílusok */
        .grid-cell {
            position: relative;
            perspective: 1000px;
            transition: transform 0.2s;
        }

        .cell-inner {
            position: relative;
            width: 100%;
            height: 100%;
            text-align: center;
            transition: transform 0.6s;
            transform-style: preserve-3d;
        }
        
        .grid-cell.flip .cell-inner {
            transform: rotateY(180deg);
        }

        .cell-face {
            position: absolute;
            width: 100%;
            height: 100%;
            -webkit-backface-visibility: hidden;
            backface-visibility: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: clamp(1.5rem, 5vw, 2rem);
            font-weight: bold;
            text-transform: uppercase;
            box-sizing: border-box;
        }
        
        .cell-front {
            border: 2px solid var(--border-color);
        }

        .grid-cell.filled .cell-front {
            border-color: #565758;
            animation: pop 0.2s;
        }

        .cell-back {
            color: var(--text-color);
            transform: rotateY(180deg);
            border: 2px solid transparent;
        }

        .cell-back.correct { background-color: var(--correct-color); }
        .cell-back.present { background-color: var(--present-color); }
        .cell-back.absent  { background-color: var(--absent-color); }


        @keyframes pop {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        #hint-container {
            border: 1px dashed var(--border-color);
            padding: 10px 15px;
            margin: 15px 0;
            border-radius: 8px;
            text-align: center;
            min-height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 90%;
            flex-grow: 1;
            overflow-y: auto;
        }

        #hint-text { margin: 0; font-style: italic; color: #c0c0c0; }

        #keyboard-container {
            display: flex;
            flex-direction: column;
            gap: 8px;
            width: 100%;
            padding: 0 5px 10px 5px;
            box-sizing: border-box;
        }

        .keyboard-row { display: flex; justify-content: center; gap: 6px; width: 100%; }

        .key {
            font-family: inherit;
            font-weight: bold;
            background-color: var(--key-bg);
            color: var(--key-text-color);
            border: none;
            border-radius: 4px;
            height: 50px;
            flex: 1;
            cursor: pointer;
            text-transform: uppercase;
            font-size: clamp(0.8rem, 2.5vw, 1rem);
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.2s;
        }

        .key:hover { background-color: #9d9fa1; }
        .key.large { flex: 1.5; font-size: clamp(0.7rem, 2vw, 0.8rem); }
        .key.correct { background-color: var(--correct-color); color: var(--text-color); }
        .key.present { background-color: var(--present-color); color: var(--text-color); }
        .key.absent  { background-color: var(--absent-color); color: var(--text-color); }

        #message-container {
            position: absolute;
            top: 15%;
            left: 50%;
            transform: translateX(-50%);
            background-color: rgba(255, 255, 255, 0.95);
            color: #121213;
            padding: 15px 25px;
            border-radius: 8px;
            font-weight: bold;
            z-index: 100;
            opacity: 0;
            transition: opacity 0.5s;
            pointer-events: none;
            text-align: center;
        }

        #message-container.show { opacity: 1; }
        .row-shake { animation: shake 0.5s; }

        @keyframes shake {
            10%, 90% { transform: translateX(-1px); }
            20%, 80% { transform: translateX(2px); }
            30%, 50%, 70% { transform: translateX(-4px); }
            40%, 60% { transform: translateX(4px); }
        }
    </style>
</head>
<body>

    <div id="game-container">
        <header>
            <h1>Napi Szó</h1>
            <p>Találd ki a mai 6 betűs szót!</p>
        </header>

        <div id="message-container"></div>
        <main id="grid-container"></main>

        <div id="hint-container">
            <p id="hint-text">Tippelj, hogy megkapd az első segítséget!</p>
        </div>

        <div id="keyboard-container"></div>
    </div>

    <script>
        // --- JÁTÉK LOGIKA (JAVASCRIPT) ---
        document.addEventListener('DOMContentLoaded', () => {

            const wordsWithHints = [
                // Eredeti szavak
                { word: "ASZTAL", hints: ["Bútor.", "Általában négy lába van.", "Enni vagy dolgozni szoktunk rajta."] },
                { word: "ISKOLA", hints: ["Épület.", "Gyerekek járnak ide.", "Tudást szereznek benne."] },
                { word: "PALOTA", hints: ["Nagy, díszes épület.", "Régen uralkodók laktak benne.", "Gyakran van trónterme."] },
                { word: "BARACK", hints: ["Gyümölcs.", "Lehet sárga vagy őszibarack.", "Szőrös a héja."] },
                { word: "KALAND", hints: ["Élmény.", "Izgalmas és szokatlan.", "A hősök gyakran átélik."] },
                { word: "KOVÁCS", hints: ["Szakma.", "Fémmel dolgozik.", "Üllőt és kalapácsot használ."] },
                { word: "PÁLINKA", hints: ["Ital.", "Magyar hungarikum.", "Gyümölcsből erjesztik és főzik."] },
                { word: "SZAPPAN", hints: ["Tisztálkodási szer.", "Vízzel habzik.", "Kézápolás elengedhetetlen kelléke."] },
                { word: "TEKNŐS", hints: ["Állat.", "Páncélja van.", "Nagyon lassan mozog."] },
                { word: "ABLAKO", hints: ["Épület része.", "Kilátást biztosít.", "Üvegből készül."] },
                { word: "HARANG", hints: ["Tárgy.", "Hangot ad ki, ha megütik.", "Templomtoronyban található."] },
                { word: "RADÍRO", hints: ["Iskolaszer.", "Hibajavításra használják.", "Eltünteti a grafitot."] },
                { word: "VÁNDOR", hints: ["Személy.", "Sokat utazik.", "Nincs állandó otthona."] },
                { word: "GOMBÓC", hints: ["Étel.", "Lehet édes vagy sós.", "Gyakran túróval vagy szilvával töltik."] },
                { word: "SALÁTA", hints: ["Étel.", "Zöldségekből áll.", "Könnyű, egészséges köret vagy főétel."] },
                { word: "RENDŐR", hints: ["Foglalkozás.", "A rendet és biztonságot felügyeli.", "Egyenruhát visel."] },
                { word: "LEPKEF", hints: ["Élőlény.", "Színes szárnyai vannak.", "Hernyóból fejlődik ki."] },
                { word: "PÉNZTÁ", hints: ["Hely.", "Itt fizetünk a boltban.", "Kasszás dolgozik benne."] },
                { word: "FOGOLY", hints: ["Madár.", "Mezőkön él.", "Akit fogságban tartanak, szintén ez."] },
                { word: "ORSZÁG", hints: ["Földrajzi egység.", "Saját kormánya és határai vannak.", "Például Magyarország."] },
                
                // +30 új szó
                { word: "REPÜLŐ", hints: ["Jármű.", "A levegőben közlekedik.", "Szárnyai vannak és pilóta vezeti."] },
                { word: "TÁNYÉR", hints: ["Eszköz.", "Ebből eszünk.", "Lehet lapos vagy mély."] },
                { word: "FESTŐ", hints: ["Művész.", "Ecsetet és vásznat használ.", "Képeket alkot."] },
                { word: "KERTÉSZ", hints: ["Szakma.", "Növényekkel foglalkozik.", "Gondozza a kerteket, parkokat."] },
                { word: "POHÁR", hints: ["Tárgy.", "Ebből iszunk.", "Általában üvegből vagy műanyagból készül."] },
                { word: "TAVASZ", hints: ["Évszak.", "A tél után következik.", "Rügyeznek a fák, nyílnak a virágok."] },
                { word: "CIPŐS", hints: ["Bolt.", "Lábbeliket árulnak itt.", "Vagy egy szakma, aki készíti őket."] },
                { word: "VÁROS", hints: ["Település.", "Nagyobb, mint egy falu.", "Sok utca és épület van benne."] },
                { word: "KULACS", hints: ["Tárolóeszköz.", "Italt tartunk benne kiránduláskor.", "Segít, hogy ne legyünk szomjasak."] },
                { word: "ZENÉSZ", hints: ["Foglalkozás.", "Hangszeren játszik.", "Koncerteken lép fel."] },
                { word: "HINTAL", hints: ["Játékszer.", "Játszótereken található.", "Előre-hátra lehet rajta lengeni."] },
                { word: "FELHŐS", hints: ["Időjárás.", "Az eget felhők borítják.", "Nem süt a nap."] },
                { word: "HEGEDŰ", hints: ["Hangszer.", "Vonóval szólaltatják meg.", "Négy húrja van."] },
                { word: "CSATOR", hints: ["Építmény.", "Vizet vezet el.", "Vagy TV-adást is jelenthet."] },
                { word: "SZOBOR", hints: ["Műalkotás.", "Kőből, fémből vagy fából faragják.", "Emléket állít valaminek/valakinek."] },
                { word: "MOTORO", hints: ["Jármű.", "Két kereke van.", "Bukósisak kell a vezetéséhez."] },
                { word: "SZÍNHÁ", hints: ["Épület.", "Előadásokat tartanak benne.", "Vannak színészek és nézőtér."] },
                { word: "PAPLAN", hints: ["Ágynemű.", "Ezzel takarózunk alvás közben.", "Melegen tart."] },
                { word: "KÓRHÁZ", hints: ["Intézmény.", "Betegeket gyógyítanak itt.", "Orvosok és ápolók dolgoznak benne."] },
                { word: "KÖNYVT", hints: ["Hely.", "Könyveket lehet innen kölcsönözni.", "Csendben kell lenni."] },
                { word: "SPORTOL", hints: ["Cselekvés.", "Testmozgást végez.", "Lehet egyéni vagy csapatsport."] },
                { word: "TÉRKÉP", hints: ["Eszköz.", "Segít a tájékozódásban.", "Utakat, városokat, országokat ábrázol."] },
                { word: "CSOKOLÁ", hints: ["Édesség.", "Kakaóbabból készül.", "Lehet tej-, ét- vagy fehér."] },
                { word: "EBÉDLŐ", hints: ["Helyiség.", "Itt zajlik a déli étkezés.", "Iskolákban, munkahelyeken gyakori."] },
                { word: "SZEMÜV", hints: ["Eszköz.", "Segíti a látást.", "Két lencséből és egy keretből áll."] },
                { word: "FAGYLA", hints: ["Édesség.", "Hideg, nyalni kell.", "Tölcsérben vagy kehelyben adják."] },
                { word: "KEMENCE", hints: ["Sütőeszköz.", "Régen kenyeret sütöttek benne.", "Magas hőmérsékleten működik."] },
                { word: "LÁMPÁS", hints: ["Világítóeszköz.", "Fényt ad a sötétben.", "Lehet vihar- vagy olaj- előtagja."] },
                { word: "MANDULA", hints: ["Csonthéjas termés.", "Édességekhez használják.", "Vagy a torokban is van ilyen."] },
                { word: "NARANC", hints: ["Gyümölcs.", "A színe is ez.", "Déligyümölcs, télen népszerű."] },
            ];
            
            const WORD_LENGTH = 6;
            const MAX_GUESSES = 10;
            let currentRow = 0;
            let currentCol = 0;
            let isGameOver = false;

            function getDailyWord() {
                const startDate = new Date("2024-01-01");
                const today = new Date();
                today.setHours(0, 0, 0, 0);
                const dayDifference = Math.floor((today - startDate) / (1000 * 60 * 60 * 24));
                const wordIndex = dayDifference % wordsWithHints.length;
                return wordsWithHints[wordIndex];
            }
            
            const { word: targetWord, hints: targetHints } = getDailyWord();
            const gridContainer = document.getElementById('grid-container');
            const keyboardContainer = document.getElementById('keyboard-container');
            const messageContainer = document.getElementById('message-container');
            const hintText = document.getElementById('hint-text');

            function initializeGame() {
                for (let i = 0; i < MAX_GUESSES; i++) {
                    const row = document.createElement('div');
                    row.classList.add('grid-row');
                    row.id = `row-${i}`;
                    for (let j = 0; j < WORD_LENGTH; j++) {
                        const cell = document.createElement('div');
                        cell.classList.add('grid-cell');
                        cell.id = `cell-container-${i}-${j}`;
                        
                        const cellInner = document.createElement('div');
                        cellInner.classList.add('cell-inner');
                        
                        const cellFront = document.createElement('div');
                        cellFront.classList.add('cell-face', 'cell-front');
                        cellFront.id = `cell-front-${i}-${j}`;
                        
                        const cellBack = document.createElement('div');
                        cellBack.classList.add('cell-face', 'cell-back');
                        cellBack.id = `cell-back-${i}-${j}`;

                        cellInner.appendChild(cellFront);
                        cellInner.appendChild(cellBack);
                        cell.appendChild(cellInner);
                        row.appendChild(cell);
                    }
                    gridContainer.appendChild(row);
                }

                const keyLayout = [
                    ['Q', 'W', 'E', 'R', 'T', 'Z', 'U', 'I', 'O', 'P'],
                    ['A', 'S', 'D', 'F', 'G', 'H', 'J', 'K', 'L', 'É', 'Á'],
                    ['Enter', 'Y', 'X', 'C', 'V', 'B', 'N', 'M', 'Backspace'],
                    ['Ö', 'Ü', 'Ó', 'Ő', 'Ú', 'Ű', 'Í']
                ];
                
                keyLayout.forEach(rowKeys => {
                    const row = document.createElement('div');
                    row.classList.add('keyboard-row');
                    rowKeys.forEach(key => {
                        const button = document.createElement('button');
                        button.textContent = key;
                        button.classList.add('key');
                        button.dataset.key = key.toLowerCase();
                        if (key === 'Enter' || key === 'Backspace') {
                            button.classList.add('large');
                        }
                        button.addEventListener('click', () => handleKeyPress(key));
                        row.appendChild(button);
                    });
                    keyboardContainer.appendChild(row);
                });
            }

            function handleKeyPress(key) {
                if (isGameOver) return;
                
                const keyLower = key.toLowerCase();
                
                if (keyLower === 'enter') {
                    submitGuess();
                } else if (keyLower === 'backspace') {
                    deleteLetter();
                } else if (key.length === 1 && key.match(/^[a-zA-ZáéíóöőúüűÁÉÍÓÖŐÚÜŰ]$/)) {
                    addLetter(key.toUpperCase());
                }
            }

            function addLetter(letter) {
                if (currentCol < WORD_LENGTH) {
                    const cellContainer = document.getElementById(`cell-container-${currentRow}-${currentCol}`);
                    const cellFront = document.getElementById(`cell-front-${currentRow}-${currentCol}`);
                    cellFront.textContent = letter;
                    cellContainer.classList.add('filled');
                    currentCol++;
                }
            }

            function deleteLetter() {
                if (currentCol > 0) {
                    currentCol--;
                    const cellContainer = document.getElementById(`cell-container-${currentRow}-${currentCol}`);
                    const cellFront = document.getElementById(`cell-front-${currentRow}-${currentCol}`);
                    cellFront.textContent = '';
                    cellContainer.classList.remove('filled');
                }
            }
            
            function updateHints() {
                 let hintsToShow = [];
                 if (currentRow >= 0) hintsToShow.push(targetHints[0]);
                 if (currentRow >= 3) hintsToShow.push(targetHints[1]);
                 if (currentRow >= 6) hintsToShow.push(targetHints[2]);
                 hintText.innerHTML = "Segítség:<br>" + hintsToShow.join('<br>');
            }

            function submitGuess() {
                if (currentCol !== WORD_LENGTH) {
                    showMessage("A szó túl rövid!");
                    shakeRow();
                    return;
                }

                const guess = Array.from({ length: WORD_LENGTH }, (_, i) => 
                    document.getElementById(`cell-front-${currentRow}-${i}`).textContent
                ).join('');

                flipRow(guess);
                
                if (guess === targetWord) {
                    setTimeout(() => {
                        showMessage("Sikeres megfejtés!", 5000);
                        isGameOver = true;
                        hintText.parentElement.style.borderColor = 'var(--correct-color)';
                        hintText.innerHTML = `Ügyes! A helyes szó: <strong>${targetWord}</strong>.`;
                    }, WORD_LENGTH * 200); // Wait for the flip animation to finish
                    return;
                }
                
                currentRow++;
                
                if (currentRow >= MAX_GUESSES) {
                    setTimeout(() => {
                        isGameOver = true;
                        showMessage(`Sajnos nem sikerült!`, 10000);
                        hintText.parentElement.style.borderColor = '#d9534f';
                        hintText.innerHTML = `A helyes szó ez lett volna: <strong>${targetWord}</strong>.`;
                    }, WORD_LENGTH * 200);
                } else {
                    currentCol = 0;
                    updateHints();
                }
            }

            function flipRow(guess) {
                const targetLetters = targetWord.split('');
                const guessLetters = guess.split('');
                const letterStates = Array(WORD_LENGTH).fill(null);

                // First pass for correct letters (green)
                guessLetters.forEach((letter, index) => {
                    if (letter === targetLetters[index]) {
                        letterStates[index] = 'correct';
                        targetLetters[index] = null; // Mark as used
                    }
                });

                // Second pass for present letters (yellow)
                guessLetters.forEach((letter, index) => {
                    if (letterStates[index] === null && targetLetters.includes(letter)) {
                        letterStates[index] = 'present';
                        targetLetters[targetLetters.indexOf(letter)] = null; // Mark as used
                    }
                });
                
                // Fill the rest as absent (gray)
                letterStates.fill('absent', 0, WORD_LENGTH);

                // Re-run for correct and present to override absent
                 guessLetters.forEach((letter, index) => {
                    if (letter === targetWord[index]) {
                        letterStates[index] = 'correct';
                    }
                });
                 guessLetters.forEach((letter, index) => {
                    if (letterStates[index] !== 'correct' && targetWord.includes(letter) && targetLetters.includes(letter)) {
                         letterStates[index] = 'present';
                         targetLetters[targetLetters.indexOf(letter)] = null;
                    }
                });

                for (let i = 0; i < WORD_LENGTH; i++) {
                    const cellContainer = document.getElementById(`cell-container-${currentRow}-${i}`);
                    const cellBack = document.getElementById(`cell-back-${currentRow}-${i}`);
                    
                    setTimeout(() => {
                        cellBack.textContent = guessLetters[i];
                        cellBack.classList.add(letterStates[i]);
                        cellContainer.classList.add('flip');
                        updateKeyboard(guessLetters[i], letterStates[i]);
                    }, i * 200);
                }
            }

            function updateKeyboard(letter, state) {
                const key = document.querySelector(`.key[data-key="${letter.toLowerCase()}"]`);
                if (!key) return;

                const currentStatePriority = { 'correct': 3, 'present': 2, 'absent': 1 };
                const currentClass = key.classList.contains('correct') ? 'correct' : key.classList.contains('present') ? 'present' : 'absent';
                
                if (!currentClass || currentStatePriority[state] > currentStatePriority[currentClass]) {
                    key.classList.remove('correct', 'present', 'absent');
                    key.classList.add(state);
                }
            }
            
            function showMessage(message, duration = 3000) {
                messageContainer.innerHTML = message;
                messageContainer.classList.add('show');
                setTimeout(() => {
                    messageContainer.classList.remove('show');
                }, duration);
            }

            function shakeRow() {
                const row = document.getElementById(`row-${currentRow}`);
                row.classList.add('row-shake');
                setTimeout(() => {
                    row.classList.remove('row-shake');
                }, 500);
            }
            
            document.addEventListener('keydown', (e) => handleKeyPress(e.key));
            
            initializeGame();
        });
    </script>
</body>
</html>
